<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Register</title>
    <link rel="stylesheet" href="/css/login.css" />
    <%- include("./includes/bootstrap.ejs") %>
  </head>
  <body>
      <div class="form-wrapper">
        <form
        class="register-form"
        method="POST"
        onsubmit="event.preventDefault(); validateForm()"
        action="/register"
        >
        <% if (!fullFields) { %>
          <p class="register-form__error-message" style="text-align: center;">Make sure to fill out all fields.</p>
        <% } %>
            <input
              required
              type="email"
              class="form-control register-form__email"
              placeholder="Email"
              name="email"
            />
            <% if (!uniqueEmail) { %>
              <p class="register-form__error-message">Email already in use.</p>
            <% } %>
            <input
              required
              type="password"
              class="form-control register-form__password"
              placeholder="Create a Password"
              name="password"
            />
            <input
              required
              type="password"
              class="form-control register-form__confirm-password"
              placeholder="Confirm Password"
              name="passwordConf"
            />
            <button
              type="submit"
              class="btn btn-info register-form__submit"
              id="submit-button"
            >
              Register
            </button>
            <div class="spinner-wrapper" style="text-align: center; display: none">
              <div
                id="loading-spinner"
                class="spinner-border text-primary"
                role="status"
              >
                <span class="sr-only">Loading...</span>
              </div>
            </div>
            <p class="register-form__form-caption">
              Already have an account? Click
              <a id="register-form__form-caption-link" href="/secure/login">Here</a>
              to login.
            </p>
          </form>
      </div>
  </body>
  <script>
      function validateForm() {
          const password = document.querySelector(".register-form__password");
          const passwordConf = document.querySelector(".register-form__confirm-password");
            const form = document.querySelector("form");

          if (password.value !== passwordConf.value) {
              alert("Passwords do not match. Please try again.")
          } else {
            form.submit();
          }
      }
  </script>
</html>